<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <title>hello-wasm example</title>
    <link rel="stylesheet" href="./main.css">
    <link rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Roboto+Mono">
  </head>
  <body>
    <script type="module">
      import init, { decode_zlib, decode_png } from "./png_decoder.js";

      function call_wasm_decode_zlib(data) {
        init().then(() => {
          try {
            let result = decode_zlib(data);
            let parsed = JSON.parse(result);
            window.decoded_callback(parsed);
            console.log(parsed);
          } catch (err) {
              console.log(err);
          }
        });
      }
      window.call_wasm_decode_zlib = call_wasm_decode_zlib;

      function call_wasm_decode_png(data) {
        init().then(() => {
          try {
            let result = decode_png(data);
            let parsed = JSON.parse(result);
            window.decoded_callback(parsed);
            console.log(parsed);
          } catch (err) {
              console.log(err);
          }
        });
      }
      window.call_wasm_decode_png = call_wasm_decode_png;

    </script>
    <script src="main.js"></script>
    <div style="width:80%; padding: 0 10%;">
      <textarea wrap="hard" id="main-input-box" type="text">[120, 156, 99, 96, 100, 98, 102, 97, 101, 99, 231, 224, 228, 226, 230, 225, 229, 227, 23, 16, 20, 18, 22, 17, 21, 19, 151, 144, 148, 146, 150, 145, 149, 147, 87, 80, 84, 82, 86, 81, 85, 83, 215, 208, 212, 210, 214, 209, 213, 211, 55, 48, 52, 50, 54, 49, 53, 51, 183, 176, 180, 178, 182, 177, 181, 179, 119, 112, 116, 114, 118, 113, 117, 115, 247, 240, 244, 242, 246, 241, 245, 243, 15, 8, 12, 10, 14, 9, 13, 11, 143, 136, 140, 138, 142, 137, 141, 139, 79, 72, 76, 74, 78, 73, 77, 75, 207, 200, 204, 202, 206, 201, 205, 203, 47, 40, 44, 42, 46, 41, 45, 43, 175, 168, 172, 170, 174, 169, 173, 171, 111, 104, 108, 106, 110, 105, 109, 107, 239, 232, 236, 234, 238, 233, 237, 235, 159, 48, 113, 210, 228, 41, 83, 167, 77, 159, 49, 115, 214, 236, 57, 115, 231, 205, 95, 176, 112, 209, 226, 37, 75, 151, 45, 95, 177, 114, 213, 234, 53, 107, 215, 173, 223, 176, 113, 211, 230, 45, 91, 183, 109, 223, 177, 115, 215, 238, 61, 123, 247, 237, 63, 112, 240, 208, 225, 35, 71, 143, 29, 63, 113, 242, 212, 233, 51, 103, 207, 157, 191, 112, 241, 210, 229, 43, 87, 175, 93, 191, 113, 243, 214, 237, 59, 119, 239, 221, 127, 240, 240, 209, 227, 39, 79, 159, 61, 127, 241, 242, 213, 235, 55, 111, 223, 189, 255, 240, 241, 211, 231, 47, 95, 191, 125, 255, 241, 243, 215, 239, 63, 127, 255, 49, 140, 108, 239, 3, 0, 102, 203, 253, 3]</textarea>
      <div style="height: 30px; width: 100%; display: flex; justify-content: center; margin: 0 20px; padding: 0;">
        <button onclick="decode_data(event)">Decode Bytes</button>
        <div>
          <button style="position: relative; height: 100%; margin: 0 20px;">Open .png
            <input type="file" accept=".png" style="opacity: 0; position: absolute; left: 0; right: 0; width: 100%; height: 100%;" onchange="load_png_data(event)">
          </button>
        </div>
      </div>
    </div>
    <div style="width:90%; padding: 30px 5%; display: flex; justify-content: space-around;">
      <div style="width: 48%; height: 70vh; overflow-y: scroll;">
        <table id="token-table">
          
        </table>
      </div>
      <div style="width: 48%">
        <table id="bytes-table">
            <tbody>
              <tr style="width: 100%;">
                <th>0</th>
                <th>1</th>
                <th>2</th>
                <th>3</th>
                <th>4</th>
                <th>5</th>
                <th>6</th>
                <th>7</th>
              </tr>
              <tr>
                
              </tr>
          </tbody>
        </table>
      </div>
    </div>
  </body>
</html>